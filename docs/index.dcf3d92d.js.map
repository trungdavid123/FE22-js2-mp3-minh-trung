{"mappings":"AAAe,MAAAA,EACbC,YAAYC,GACVC,KAAKD,QAAUA,CACjB,CAEAE,IAAIC,EAAKC,GACPH,KAAKD,QAAQK,QAAQF,EAAsB,iBAAVC,EAAqBA,EAAQE,KAAKC,UAAUH,GAC/E,CAEAI,IAAIL,GACF,MAAMC,EAAQH,KAAKD,QAAQS,QAAQN,GAE7BO,IADYN,IAAQA,EAAMO,QAAQ,KAAOP,EAAMO,QAAQ,MAAQP,EAAMO,QAAQ,KAAOP,EAAMO,QAAQ,MACxEL,KAAKM,MAAMR,GAASA,EACpD,OAAOA,EAAQM,EAAc,IAC/B,CAEAG,OAAOV,GACLF,KAAKD,QAAQc,WAAWX,EAC1B,CAEAY,QACEd,KAAKD,QAAQe,OACf,CAGAC,UAAUb,EAAKC,GACbH,KAAKD,QAAQK,QAAQF,EAAKG,KAAKC,UAAUH,GAC3C,CAEAa,UAAUd,GACR,OAAOF,KAAKD,QAAQS,QAAQN,GAAOG,KAAKM,MAAMX,KAAKD,QAAQS,QAAQN,IAAQ,CAAC,CAC9E,EC5BK,MACMe,EAAuC,oBAAjBC,aAA+B,IAAIrB,EAAiBqB,cAAgB,KAC/C,oBAAnBC,gBAAiC,IAAItB,EAAiBsB,gBCF3F,IAAIC,EAAKH,E,MCHTI,EAAiB,SAAUC,GAAK,IAAIC,EAAI,CAAC,EAAG,SAASC,EAAEC,GAAK,GAAIF,EAAEE,GAAI,OAAOF,EAAEE,GAAGC,QAAS,IAAIC,EAAIJ,EAAEE,GAAK,CAAEG,EAAGH,EAAGI,GAAG,EAAIH,QAAS,CAAC,GAAK,OAAOJ,EAAEG,GAAGK,KAAKH,EAAED,QAASC,EAAGA,EAAED,QAASF,GAAIG,EAAEE,GAAI,EAAIF,EAAED,OAAQ,CAAE,OAAOF,EAAEO,EAAIT,EAAGE,EAAEQ,EAAIT,EAAGC,EAAES,EAAI,SAAUX,EAAGC,EAAGE,GAAKD,EAAEG,EAAEL,EAAGC,IAAMW,OAAOC,eAAeb,EAAGC,EAAG,CAAEa,YAAY,EAAI7B,IAAKkB,GAAK,EAAGD,EAAEC,EAAI,SAAUH,GAAK,oBAAsBe,QAAUA,OAAOC,aAAeJ,OAAOC,eAAeb,EAAGe,OAAOC,YAAa,CAAEnC,MAAO,WAAa+B,OAAOC,eAAeb,EAAG,aAAc,CAAEnB,OAAO,GAAM,EAAGqB,EAAED,EAAI,SAAUD,EAAGC,GAAK,GAAI,EAAIA,IAAMD,EAAIE,EAAEF,IAAK,EAAIC,EAAG,OAAOD,EAAG,GAAI,EAAIC,GAAK,iBAAmBD,GAAKA,GAAKA,EAAEiB,WAAY,OAAOjB,EAAG,IAAIG,EAAIS,OAAOM,OAAO,MAAO,GAAIhB,EAAEC,EAAEA,GAAIS,OAAOC,eAAeV,EAAG,UAAW,CAAEW,YAAY,EAAIjC,MAAOmB,IAAM,EAAIC,GAAK,iBAAmBD,EAAG,IAAK,IAAIK,KAAKL,EAAGE,EAAES,EAAER,EAAGE,EAAG,SAAUJ,GAAK,OAAOD,EAAEC,EAAG,EAAEkB,KAAK,KAAMd,IAAK,OAAOF,CAAE,EAAGD,EAAEA,EAAI,SAAUF,GAAK,IAAIC,EAAID,GAAKA,EAAEiB,WAAa,WAAc,OAAOjB,EAAEoB,OAAQ,EAAI,WAAc,OAAOpB,CAAE,EAAG,OAAOE,EAAES,EAAEV,EAAG,IAAKA,GAAIA,CAAE,EAAGC,EAAEG,EAAI,SAAUL,EAAGC,GAAK,OAAOW,OAAOS,UAAUC,eAAed,KAAKR,EAAGC,EAAG,EAAGC,EAAEqB,EAAI,IAAKrB,EAAEA,EAAEsB,EAAI,EAAG,CAA9kC,CAAglC,CAAC,SAAUxB,EAAGC,EAAGC,GAAmBA,EAAEC,EAAEF,GAAIC,EAAES,EAAEV,EAAG,UAAW,WAAc,OAAOwB,CAAE,IAAKvB,EAAES,EAAEV,EAAG,gBAAiB,WAAc,OAAOyB,CAAE,IAAKxB,EAAES,EAAEV,EAAG,kBAAmB,WAAc,OAAOS,CAAE,IAAK,IAAIP,EAAI,CAAElB,IAAK,SAAUe,GAAK,IAAIC,EAAI0B,SAASC,OAAOC,MAAM,IAAIC,OAAO,WAAWC,OAAO/B,EAAEgC,QAAQ,yBAA0B,QAAS,cAAe,OAAO/B,EAAIgC,mBAAmBhC,EAAE,SAAM,CAAO,EAAGtB,IAAK,SAAUqB,EAAGC,EAAGC,GAAK,IAAIC,EAAI,IAAI+B,KAAM/B,EAAEgC,QAAQhC,EAAEiC,UAAY,GAAKlC,EAAL,MAAyB,IAAIG,EAAI,WAAW0B,OAAO5B,EAAEkC,eAAgBV,SAASC,OAAS,GAAGG,OAAO/B,EAAG,KAAK+B,OAAO9B,EAAG,KAAK8B,OAAO1B,EAAG,UAAW,EAAGf,OAAQ,SAAUU,GAAKtB,KAAKC,IAAIqB,EAAG,IAAI,EAAI,GAAK,SAASK,EAAEL,EAAGC,GAAK,IAAK,IAAIC,EAAI,EAAGA,EAAID,EAAEqC,OAAQpC,IAAK,CAAE,IAAIC,EAAIF,EAAEC,GAAIC,EAAEW,WAAaX,EAAEW,aAAc,EAAIX,EAAEoC,cAAe,EAAI,UAAWpC,IAAMA,EAAEqC,UAAW,GAAK5B,OAAOC,eAAeb,EAAGG,EAAEvB,IAAKuB,EAAG,CAAE,CAAE,IAAIG,EAAI,WAAc,SAASN,EAAEC,IAAM,SAAUD,EAAGC,GAAK,KAAMD,aAAaC,GAAI,MAAM,IAAIwC,UAAU,oCAAqC,CAAlG,CAAoG/D,KAAMsB,GAAItB,KAAKD,QAAUwB,CAAE,CAAE,IAAIA,EAAGC,EAAM,OAAeA,EAAI,CAAC,CAAEtB,IAAK,MAAOC,MAAO,SAAUmB,EAAGC,GAAKvB,KAAKD,QAAQK,QAAQkB,EAAG,iBAAmBC,EAAIA,EAAIlB,KAAKC,UAAUiB,GAAI,GAAK,CAAErB,IAAK,MAAOC,MAAO,SAAUmB,GAAK,IAAIC,EAAIvB,KAAKD,QAAQS,QAAQc,GAAIE,EAAID,IAAMA,EAAEb,QAAQ,KAAOa,EAAEb,QAAQ,MAAQa,EAAEb,QAAQ,KAAOa,EAAEb,QAAQ,MAAQL,KAAKM,MAAMY,GAAKA,EAAG,OAAOA,EAAIC,EAAI,IAAK,GAAK,CAAEtB,IAAK,SAAUC,MAAO,SAAUmB,GAAKtB,KAAKD,QAAQc,WAAWS,EAAG,GAAK,CAAEpB,IAAK,QAASC,MAAO,WAAcH,KAAKD,QAAQe,OAAQ,GAAK,CAAEZ,IAAK,YAAaC,MAAO,SAAUmB,EAAGC,GAAKvB,KAAKD,QAAQK,QAAQkB,EAAGjB,KAAKC,UAAUiB,GAAI,GAAK,CAAErB,IAAK,YAAaC,MAAO,SAAUmB,GAAK,OAAOtB,KAAKD,QAAQS,QAAQc,GAAKjB,KAAKM,MAAMX,KAAKD,QAAQS,QAAQc,IAAM,CAAC,CAAE,IAASK,GAAhqBJ,EAAID,GAAgqBqB,UAAWnB,GAAkBU,OAAOC,eAAeZ,EAAG,YAAa,CAAEuC,UAAU,IAAOxC,CAAE,CAAh7B,GAAq7ByB,EAAItB,EAAGuB,EAAI,oBAAsB9B,aAAe,IAAIU,EAAEV,cAAgB,KAAMc,EAAI,oBAAsBb,eAAiB,IAAIS,EAAET,gBAAkB,IAAK,ICGvgG,MAAM6C,EAAef,SAASgB,cAAc,kBACtCC,EAAM,OAEZ,IAAIC,EAAK9C,EAAA+C,aAET,SAASC,IACL,IAAIC,EAAoBH,EAAG5D,IAAI2D,IFwBDhE,EExB0BgE,EFyBjD9C,EAAGb,IAAIL,IAAMqE,QAAO,CAACC,GAAKC,IAAEA,KAAUD,EAAMC,GAAK,IEzBO,GFwB5D,IAA2BvE,EEvB9B8D,EAAaU,UAAYJ,CAC7B,CAmCAD,IAhCIM,MAAMpE,IAAI,2FACLqE,MAAK,EAACC,KAAEA,MACL,IACI,IAAIC,EAAUD,EAAKE,KAAKC,GACb,0CACYA,EAAKC,QAAU,EAAI,WAAa,2CACnCD,EAAKE,4FACYF,EAAKG,kEACHH,EAAKI,yIAIzCC,KAAK,IAEUpC,SAASgB,cAAc,UAC/BqB,UAAYR,EAGR7B,SAASsC,iBAAiB,aAChCC,SAAQ,CAACV,EAASW,KACtBX,EAAQY,iBAAiB,SAAS,KAC9B,IAAIC,EAAUd,EAAKe,QAAO,CAACZ,EAAMa,IAAOA,IAAOJ,KF9BhE,SAAmBK,EAAcH,GACpC,IAAId,EAAOzD,EAAGb,IAAIuF,GAAgB1E,EAAGb,IAAIuF,GAAgB,GACrDrB,EAAM,CACNA,IAAK,GAELsB,EAAaJ,EAAQ,GAETd,EAAKmB,MAAKlB,GAClBA,EAAQe,KAAOE,EAAWF,KAU9BhB,EAAKE,KAAKC,IACFA,EAAKa,KAAOE,EAAWF,MACrBb,EAAKP,GAAG,KALlBvC,OAAO+D,OAAOF,EAAYtB,GAC1BI,EAAKqB,KAAKH,IASd3E,EAAGnB,IAAI6F,EAAcjB,EACzB,EEKwB,CAAUX,EAAKyB,GACftB,GAAA,GACJ,GAER,CAAE,MAAO8B,GACLC,QAAQD,MAAMA,EAClB","sources":["node_modules/combo-storage/src/components/Storage.js","node_modules/combo-storage/src/index.js","utils/common.js","node_modules/combo-storage/dist/index.js","main.js"],"sourcesContent":["export default class Storage {\n  constructor(storage) {\n    this.storage = storage;\n  }\n\n  set(key, value) {\n    this.storage.setItem(key, typeof value === 'string' ? value : JSON.stringify(value));\n  }\n\n  get(key) {\n    const value = this.storage.getItem(key);\n    const condition = value ? value.indexOf('}') > value.indexOf('{') || value.indexOf(']') > value.indexOf('[') : false;\n    const valueResult = condition ? JSON.parse(value) : value;\n    return value ? valueResult : null;\n  }\n\n  remove(key) {\n    this.storage.removeItem(key);\n  }\n\n  clear() {\n    this.storage.clear();\n  }\n\n  // These methods are for backward compatibility with version 1.1.3\n  setObject(key, value) {\n    this.storage.setItem(key, JSON.stringify(value));\n  }\n\n  getObject(key) {\n    return this.storage.getItem(key) ? JSON.parse(this.storage.getItem(key)) : {};\n  }\n}\n","import CookieComponent from './components/Cookie';\nimport StorageComponent from './components/Storage';\n\nexport const Cookie = CookieComponent;\nexport const LocalStorage = typeof localStorage !== 'undefined' ? new StorageComponent(localStorage) : null;\nexport const SessionStorage = typeof sessionStorage !== 'undefined' ? new StorageComponent(sessionStorage) : null;\n","import { LocalStorage } from '../node_modules/combo-storage/src/index.js';\r\n\r\n\r\nlet ls = LocalStorage; // My new API library -.-! \r\n\r\nexport function addToCart(storage_name, payload) {\r\n    let data = ls.get(storage_name) ? ls.get(storage_name) : [];\r\n    let qty = {\r\n        qty: 1\r\n    }\r\n    let newPayload = payload[0];\r\n\r\n    const isFound = data.some(element => {\r\n        if (element.id === newPayload.id) {\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n\r\n    if (!isFound) {\r\n        Object.assign(newPayload, qty)\r\n        data.push(newPayload);\r\n    } else {\r\n        data.map((item) => {\r\n            if (item.id === newPayload.id) {\r\n                ++item.qty\r\n            }\r\n        })\r\n    }\r\n\r\n    ls.set(storage_name, data)\r\n}\r\n\r\nexport function getTotalCartItems(key) {\r\n    return ls.get(key)?.reduce((sum, { qty }) => sum + qty, 0)\r\n}\r\n\r\nexport function updateItemsToFirebase(filtedData) {\r\n    filtedData?.map((item) => {\r\n        axios.patch(`https://online-shopping-94722-default-rtdb.europe-west1.firebasedatabase.app/items/${item.id}.json`, {\r\n            balance: item.balance - item.qty\r\n        }).catch((err) => {\r\n            console.error(err)\r\n        })\r\n    })\r\n}","module.exports = function (e) { var t = {}; function n(r) { if (t[r]) return t[r].exports; var o = t[r] = { i: r, l: !1, exports: {} }; return e[r].call(o.exports, o, o.exports, n), o.l = !0, o.exports } return n.m = e, n.c = t, n.d = function (e, t, r) { n.o(e, t) || Object.defineProperty(e, t, { enumerable: !0, get: r }) }, n.r = function (e) { \"undefined\" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, { value: \"Module\" }), Object.defineProperty(e, \"__esModule\", { value: !0 }) }, n.t = function (e, t) { if (1 & t && (e = n(e)), 8 & t) return e; if (4 & t && \"object\" == typeof e && e && e.__esModule) return e; var r = Object.create(null); if (n.r(r), Object.defineProperty(r, \"default\", { enumerable: !0, value: e }), 2 & t && \"string\" != typeof e) for (var o in e) n.d(r, o, function (t) { return e[t] }.bind(null, o)); return r }, n.n = function (e) { var t = e && e.__esModule ? function () { return e.default } : function () { return e }; return n.d(t, \"a\", t), t }, n.o = function (e, t) { return Object.prototype.hasOwnProperty.call(e, t) }, n.p = \"/\", n(n.s = 0) }([function (e, t, n) { \"use strict\"; n.r(t), n.d(t, \"Cookie\", (function () { return u })), n.d(t, \"LocalStorage\", (function () { return a })), n.d(t, \"SessionStorage\", (function () { return c })); var r = { get: function (e) { var t = document.cookie.match(new RegExp(\"(?:^|; )\".concat(e.replace(/([.$?*|{}()[\\]\\\\/+^])/g, \"\\\\$1\"), \"=([^;]*)\"))); return t ? decodeURIComponent(t[1]) : void 0 }, set: function (e, t, n) { var r = new Date; r.setTime(r.getTime() + 24 * n * 60 * 60 * 1e3); var o = \"expires=\".concat(r.toUTCString()); document.cookie = \"\".concat(e, \"=\").concat(t, \";\").concat(o, \";path=/\") }, remove: function (e) { this.set(e, \"\", -1) } }; function o(e, t) { for (var n = 0; n < t.length; n++) { var r = t[n]; r.enumerable = r.enumerable || !1, r.configurable = !0, \"value\" in r && (r.writable = !0), Object.defineProperty(e, r.key, r) } } var i = function () { function e(t) { !function (e, t) { if (!(e instanceof t)) throw new TypeError(\"Cannot call a class as a function\") }(this, e), this.storage = t } var t, n, r; return t = e, (n = [{ key: \"set\", value: function (e, t) { this.storage.setItem(e, \"string\" == typeof t ? t : JSON.stringify(t)) } }, { key: \"get\", value: function (e) { var t = this.storage.getItem(e), n = t && (t.indexOf(\"}\") > t.indexOf(\"{\") || t.indexOf(\"]\") > t.indexOf(\"[\")) ? JSON.parse(t) : t; return t ? n : null } }, { key: \"remove\", value: function (e) { this.storage.removeItem(e) } }, { key: \"clear\", value: function () { this.storage.clear() } }, { key: \"setObject\", value: function (e, t) { this.storage.setItem(e, JSON.stringify(t)) } }, { key: \"getObject\", value: function (e) { return this.storage.getItem(e) ? JSON.parse(this.storage.getItem(e)) : {} } }]) && o(t.prototype, n), r && o(t, r), Object.defineProperty(t, \"prototype\", { writable: !1 }), e }(), u = r, a = \"undefined\" != typeof localStorage ? new i(localStorage) : null, c = \"undefined\" != typeof sessionStorage ? new i(sessionStorage) : null }]);","import { addToCart, getTotalCartItems } from \"./utils/common.js\";\nimport {LocalStorage} from 'combo-storage';\n\nconst quantityCart = document.querySelector('.quantity-cart');\nconst key = \"data\";\n\nlet ls = LocalStorage; // My new API library -.-! \n\nfunction getTotalQuantity() {\n    let totalQuantityCart = ls.get(key) ? getTotalCartItems(key) : [];\n    quantityCart.innerText = totalQuantityCart;\n}\n\nfunction showItems() {\n    axios.get('https://online-shopping-94722-default-rtdb.europe-west1.firebasedatabase.app/items.json')\n        .then(({ data }) => {\n            try {\n                let element = data.map((item) => {\n                    return `\n                    <div class=\"item ${item.balance < 1 ? \"sold-out\" : ''}\">\n                        <img src=\"${item.img_url}\" alt=\"\", class=\"item_img\" />\n                        <p class=\"item_name\">Name: ${item.name}</p>\n                        <p class=\"item_price\">Price: ${item.price} kr</p>\n                        <button class=\"add_cart\" >Add to cart</button>\n                    </div>\n                  `;\n                }).join('');\n\n                const container = document.querySelector('.items');\n                container.innerHTML = element;\n\n                // attach event listener to the buttons \n                let btnList = document.querySelectorAll('.add_cart');\n                btnList.forEach((element, btnIndex) => {\n                    element.addEventListener('click', () => {\n                        let payload = data.filter((item, id) => id === btnIndex);\n                        addToCart(key, payload);\n                        getTotalQuantity();\n                    });\n                });\n            } catch (error) {\n                console.error(error);\n            }\n        })\n}\n\ngetTotalQuantity()\nshowItems();\n"],"names":["$4dc9651523373246$export$2e2bcd8739ae039","constructor","storage","this","set","key","value","setItem","JSON","stringify","get","getItem","valueResult","indexOf","parse","remove","removeItem","clear","setObject","getObject","$e54143601722468b$export$19fffca37ef3e106","localStorage","sessionStorage","$65ae70a630010001$var$ls","$75f75de0f4c7f8a0$exports","e","t","n","r","exports","o","i","l","call","m","c","d","Object","defineProperty","enumerable","Symbol","toStringTag","__esModule","create","bind","default","prototype","hasOwnProperty","p","s","u","a","document","cookie","match","RegExp","concat","replace","decodeURIComponent","Date","setTime","getTime","toUTCString","length","configurable","writable","TypeError","$efd3ba4ec2608b1d$var$quantityCart","querySelector","$efd3ba4ec2608b1d$var$key","$efd3ba4ec2608b1d$var$ls","LocalStorage","$efd3ba4ec2608b1d$var$getTotalQuantity","totalQuantityCart","reduce","sum","qty","innerText","axios","then","data","element","map","item","balance","img_url","name","price","join","innerHTML","querySelectorAll","forEach","btnIndex","addEventListener","payload","filter","id","storage_name","newPayload","some","assign","push","error","console"],"version":3,"file":"index.dcf3d92d.js.map"}