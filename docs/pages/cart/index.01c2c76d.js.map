{"mappings":"AAAe,MAAAA,EACbC,YAAYC,GACVC,KAAKD,QAAUA,CACjB,CAEAE,IAAIC,EAAKC,GACPH,KAAKD,QAAQK,QAAQF,EAAsB,iBAAVC,EAAqBA,EAAQE,KAAKC,UAAUH,GAC/E,CAEAI,IAAIL,GACF,MAAMC,EAAQH,KAAKD,QAAQS,QAAQN,GAE7BO,IADYN,IAAQA,EAAMO,QAAQ,KAAOP,EAAMO,QAAQ,MAAQP,EAAMO,QAAQ,KAAOP,EAAMO,QAAQ,MACxEL,KAAKM,MAAMR,GAASA,EACpD,OAAOA,EAAQM,EAAc,IAC/B,CAEAG,OAAOV,GACLF,KAAKD,QAAQc,WAAWX,EAC1B,CAEAY,QACEd,KAAKD,QAAQe,OACf,CAGAC,UAAUb,EAAKC,GACbH,KAAKD,QAAQK,QAAQF,EAAKG,KAAKC,UAAUH,GAC3C,CAEAa,UAAUd,GACR,OAAOF,KAAKD,QAAQS,QAAQN,GAAOG,KAAKM,MAAMX,KAAKD,QAAQS,QAAQN,IAAQ,CAAC,CAC9E,EC5BK,MACMe,EAAuC,oBAAjBC,aAA+B,IAAIrB,EAAiBqB,cAAgB,KAC/C,oBAAnBC,gBAAiC,IAAItB,EAAiBsB,gBCF3F,IAAIC,EAAKH,ECAT,IAAII,EAAKJ,EAET,MAAMK,EAAM,OACNC,EAAWC,SAASC,cAAc,aAClCC,EAAaF,SAASC,cAAc,gBACpCE,EAAcH,SAASC,cAAc,iBACrCG,EAAYJ,SAASC,cAAc,eAEzC,IAAII,EAAOR,EAAGd,IAAIe,GAMlB,SAASQ,IACLT,EAAGT,OAAOU,EACd,CAEA,SAASS,IACL,MAAMC,EAAYR,SAASC,cAAc,cDWtC,IAA2BvB,ECT9B8B,EAAUC,UAAY,GACtBZ,EAAGd,IAAIe,IAAMY,KAAKC,IACd,IAAIC,EAAK,yFAGKD,EAAKE,gCACLF,EAAKG,+BACJH,EAAKG,oCACHH,EAAKI,uCACHJ,EAAKK,wCACFL,EAAKK,IAAML,EAAKI,wCAItCP,EAAUC,WAAaG,CAAA,IAE3BV,EAAWe,UAAY,gBDPOvC,ECO2BoB,EDNlDF,EAAGb,IAAIL,IAAMwC,QAAO,CAACC,GAAKH,IAAEA,KAAUG,EAAMH,GAAK,WCOxDjB,EAASkB,UAAY,aA3BdZ,GAAMK,KAAKC,GAASA,EAAKI,MAAQJ,EAAKK,MAAKE,QAAO,CAACE,EAAKzC,IAAUyC,EAAMzC,GAAO,OA6B1F,CA0BA,SAAS0C,IACL,IAAKxB,EAAGd,IAAIe,GAAM,CACdE,SAASC,cAAc,YAAYb,SACnCY,SAASC,cAAc,UAAUb,SACjC,IAAIkC,EAAUtB,SAASuB,cAAc,KACrCD,EAAQL,UAAY,sBAEpB,MAAMT,EAAYR,SAASC,cAAc,cACzCqB,EAAQE,MAAMC,UAAY,SAC1BH,EAAQE,MAAME,QAAU,OAExBlB,EAAUmB,OAAOL,EACrB,CACJ,CAjCAlB,EAAUwB,iBAAiB,SAAS,KAChCtB,IACAe,IACAd,GAAA,IAGJJ,EAAYyB,iBAAiB,SAAS,KDlB/B,IAA+BC,ICmBZhC,EAAGd,IAAIe,GDlB7B+B,GAAYnB,KAAKC,IACbmB,MAAMC,MAAM,sFAAsFpB,EAAKqB,UAAW,CAC9GC,QAAStB,EAAKsB,QAAUtB,EAAKK,MAC9BkB,OAAOC,IACNC,QAAQC,MAAMF,EAAA,GAClB,ICcJ7B,IACAe,IACAd,IACA+B,YAAW,KACPC,MAAM,wEACP,KACHD,YAAW,KACPE,OAAOC,SAASC,OAAO,sBACxB,QAmBPrB,IAtCIhB,GAAMsC,QAAO,CAACC,EAAKC,IAAUxC,EAAKyC,WAAWnC,GAASA,EAAKqB,KAAOY,EAAIZ,OAAQa,IAwClFtC","sources":["node_modules/combo-storage/src/components/Storage.js","node_modules/combo-storage/src/index.js","utils/common.js","pages/cart/app.js"],"sourcesContent":["export default class Storage {\n  constructor(storage) {\n    this.storage = storage;\n  }\n\n  set(key, value) {\n    this.storage.setItem(key, typeof value === 'string' ? value : JSON.stringify(value));\n  }\n\n  get(key) {\n    const value = this.storage.getItem(key);\n    const condition = value ? value.indexOf('}') > value.indexOf('{') || value.indexOf(']') > value.indexOf('[') : false;\n    const valueResult = condition ? JSON.parse(value) : value;\n    return value ? valueResult : null;\n  }\n\n  remove(key) {\n    this.storage.removeItem(key);\n  }\n\n  clear() {\n    this.storage.clear();\n  }\n\n  // These methods are for backward compatibility with version 1.1.3\n  setObject(key, value) {\n    this.storage.setItem(key, JSON.stringify(value));\n  }\n\n  getObject(key) {\n    return this.storage.getItem(key) ? JSON.parse(this.storage.getItem(key)) : {};\n  }\n}\n","import CookieComponent from './components/Cookie';\nimport StorageComponent from './components/Storage';\n\nexport const Cookie = CookieComponent;\nexport const LocalStorage = typeof localStorage !== 'undefined' ? new StorageComponent(localStorage) : null;\nexport const SessionStorage = typeof sessionStorage !== 'undefined' ? new StorageComponent(sessionStorage) : null;\n","import { LocalStorage } from '../node_modules/combo-storage/src/index.js';\r\n\r\n\r\nlet ls = LocalStorage; // My new API library -.-! \r\n\r\nexport function addToCart(storage_name, payload) {\r\n    let data = ls.get(storage_name) ? ls.get(storage_name) : [];\r\n    let qty = {\r\n        qty: 1\r\n    }\r\n    let newPayload = payload[0];\r\n\r\n    const isFound = data.some(element => {\r\n        if (element.id === newPayload.id) {\r\n            return true;\r\n        }\r\n        return false;\r\n    });\r\n\r\n    if (!isFound) {\r\n        Object.assign(newPayload, qty)\r\n        data.push(newPayload);\r\n    } else {\r\n        data.map((item) => {\r\n            if (item.id === newPayload.id) {\r\n                ++item.qty\r\n            }\r\n        })\r\n    }\r\n\r\n    ls.set(storage_name, data)\r\n}\r\n\r\nexport function getTotalCartItems(key) {\r\n    return ls.get(key)?.reduce((sum, { qty }) => sum + qty, 0)\r\n}\r\n\r\nexport function updateItemsToFirebase(filtedData) {\r\n    filtedData?.map((item) => {\r\n        axios.patch(`https://online-shopping-94722-default-rtdb.europe-west1.firebasedatabase.app/items/${item.id}.json`, {\r\n            balance: item.balance - item.qty\r\n        }).catch((err) => {\r\n            console.error(err)\r\n        })\r\n    })\r\n}","import { LocalStorage } from '../../node_modules/combo-storage/src/index.js';\r\nimport { getTotalCartItems, updateItemsToFirebase } from '../../utils/common.js';\r\n\r\nlet ls = LocalStorage; // My new API library -.-! \r\n\r\nconst key = \"data\";\r\nconst subtotal = document.querySelector('.subtotal');\r\nconst totalItems = document.querySelector('.total-items');\r\nconst checkOutBtn = document.querySelector('.checkout-btn');\r\nconst removeBtn = document.querySelector('.remove-btn');\r\n\r\nlet data = ls.get(key);\r\n\r\nfunction getSubtotal() {\r\n    return data?.map((item) => item.price * item.qty).reduce((acc, value) => acc + value, 0);\r\n}\r\n\r\nfunction toEmptyCart() {\r\n    ls.remove(key);\r\n}\r\n\r\nfunction showItemsCart() {\r\n    const container = document.querySelector('.item-list');\r\n\r\n    container.innerHTML = \"\";\r\n    ls.get(key)?.map((item) => {\r\n        let el = `\r\n        <li class=\"item\">\r\n            <img style=\"width: 5%;\"\r\n                src=${item.img_url}\r\n                alt=${item.name}>\r\n            <p>Name: ${item.name}</p>\r\n            <p>Price: $${item.price}</p>\r\n            <p>Quantity: ${item.qty}</p>\r\n            <p>Total price: ${item.qty * item.price} kr</p>\r\n        </li>\r\n        `;\r\n\r\n        container.innerHTML += el;\r\n    });\r\n    totalItems.innerText = `Total items: ${getTotalCartItems(key)} items`;\r\n    subtotal.innerText = `Subtotal: ${getSubtotal()} kr`;\r\n\r\n}\r\n\r\nfunction findDuplicates() {\r\n    data?.filter((obj, index) => data.findIndex((item) => item.id === obj.id) === index);\r\n}\r\n\r\nremoveBtn.addEventListener('click', () => {\r\n    toEmptyCart()\r\n    clearContent()\r\n    showItemsCart()\r\n})\r\n\r\ncheckOutBtn.addEventListener('click', () => {\r\n    updateItemsToFirebase(ls.get(key));\r\n    toEmptyCart()\r\n    clearContent()\r\n    showItemsCart()\r\n    setTimeout(() => {\r\n        alert('Thanks So Much for Your Order! I Hope You Enjoy Your New Purchase!');\r\n    }, 400);\r\n    setTimeout(() => {\r\n        window.location.assign('../../index.html');\r\n    }, 2000)\r\n})\r\n\r\n\r\nfunction clearContent() {\r\n    if (!ls.get(key)) {\r\n        document.querySelector('.buttons').remove();\r\n        document.querySelector('.total').remove();\r\n        let element = document.createElement('p');\r\n        element.innerText = \"Your cart is empty!\";\r\n\r\n        const container = document.querySelector('.container');\r\n        element.style.textAlign = \"center\";\r\n        element.style.padding = \"3rem\";\r\n\r\n        container.append(element)\r\n    }\r\n}\r\n\r\nclearContent()\r\nfindDuplicates()\r\nshowItemsCart()\r\n\r\n\r\n\r\n"],"names":["$4dc9651523373246$export$2e2bcd8739ae039","constructor","storage","this","set","key","value","setItem","JSON","stringify","get","getItem","valueResult","indexOf","parse","remove","removeItem","clear","setObject","getObject","$e54143601722468b$export$19fffca37ef3e106","localStorage","sessionStorage","$65ae70a630010001$var$ls","$6a447348fad1b7e7$var$ls","$6a447348fad1b7e7$var$key","$6a447348fad1b7e7$var$subtotal","document","querySelector","$6a447348fad1b7e7$var$totalItems","$6a447348fad1b7e7$var$checkOutBtn","$6a447348fad1b7e7$var$removeBtn","$6a447348fad1b7e7$var$data","$6a447348fad1b7e7$var$toEmptyCart","$6a447348fad1b7e7$var$showItemsCart","container","innerHTML","map","item","el","img_url","name","price","qty","innerText","reduce","sum","acc","$6a447348fad1b7e7$var$clearContent","element","createElement","style","textAlign","padding","append","addEventListener","filtedData","axios","patch","id","balance","catch","err","console","error","setTimeout","alert","window","location","assign","filter","obj","index","findIndex"],"version":3,"file":"index.01c2c76d.js.map"}